{"code":"import { __decorate } from \"tslib\";\r\nimport { property } from 'lit/decorators.js';\r\nimport { fetchCameraDatabase } from './data/websocket';\r\nexport const SubscribeMixin = (superClass) => {\r\n    class SubscribeClass extends superClass {\r\n        connectedCallback() {\r\n            super.connectedCallback();\r\n            this.__checkSubscribed();\r\n        }\r\n        disconnectedCallback() {\r\n            super.disconnectedCallback();\r\n            if (this.__unsubs) {\r\n                while (this.__unsubs.length) {\r\n                    const unsub = this.__unsubs.pop();\r\n                    if (unsub instanceof Promise) {\r\n                        unsub.then(unsubFunc => unsubFunc());\r\n                    }\r\n                    else {\r\n                        unsub();\r\n                    }\r\n                }\r\n                this.__unsubs = undefined;\r\n            }\r\n        }\r\n        updated(changedProps) {\r\n            super.updated(changedProps);\r\n            if (changedProps.has('hass')) {\r\n                this.__checkSubscribed();\r\n            }\r\n        }\r\n        async firstUpdated(changedProps) {\r\n            this.cameraDatabase = await fetchCameraDatabase(this.hass);\r\n        }\r\n        hassSubscribe() {\r\n            return [];\r\n        }\r\n        __checkSubscribed() {\r\n            if (this.__unsubs !== undefined || !this.isConnected || this.hass === undefined) {\r\n                return;\r\n            }\r\n            this.__unsubs = this.hassSubscribe();\r\n        }\r\n    }\r\n    __decorate([\r\n        property({ attribute: false })\r\n    ], SubscribeClass.prototype, \"hass\", void 0);\r\n    __decorate([\r\n        property({ attribute: false })\r\n    ], SubscribeClass.prototype, \"cameraDatabase\", void 0);\r\n    return SubscribeClass;\r\n};\r\n","references":["/workspaces/alarmo/frontend/node_modules/lit/index.d.ts","/workspaces/alarmo/frontend/node_modules/lit/decorators.d.ts","/workspaces/alarmo/frontend/node_modules/home-assistant-js-websocket/dist/index.d.ts","/workspaces/alarmo/frontend/node_modules/custom-card-helpers/dist/index.d.ts","/workspaces/alarmo/frontend/src/data/websocket.ts"]}
