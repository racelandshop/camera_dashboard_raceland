import{_ as e,d as t,g as i,t as a,H as n,c as o,x as s,f as d,q as l}from"./main-b570e60a.js";import{j as r,e as u}from"./c.5a5021e9.js";import"./c.0b900d77.js";const _=e=>s`<mwc-list-item graphic="avatar" .twoline=${!!e.entity_id}>
      ${e.state?s`<state-badge slot="graphic" .stateObj=${e}></state-badge>`:""}
      <span>${e.friendly_name}</span>
      <span slot="secondary">${e.entity_id}</span>
    </mwc-list-item>`;e([l("ha-entity-picker")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[i({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[i({type:Boolean})],key:"autofocus",value:()=>!1},{kind:"field",decorators:[i({type:Boolean})],key:"disabled",value:void 0},{kind:"field",decorators:[i({type:Boolean,attribute:"allow-custom-entity"})],key:"allowCustomEntity",value:void 0},{kind:"field",decorators:[i()],key:"label",value:void 0},{kind:"field",decorators:[i()],key:"value",value:void 0},{kind:"field",decorators:[i({type:Array,attribute:"include-domains"})],key:"includeDomains",value:void 0},{kind:"field",decorators:[i({type:Array,attribute:"exclude-domains"})],key:"excludeDomains",value:void 0},{kind:"field",decorators:[i({type:Array,attribute:"include-device-classes"})],key:"includeDeviceClasses",value:void 0},{kind:"field",decorators:[i({type:Array,attribute:"include-unit-of-measurement"})],key:"includeUnitOfMeasurement",value:void 0},{kind:"field",decorators:[i()],key:"entityFilter",value:void 0},{kind:"field",decorators:[i({type:Boolean})],key:"hideClearIcon",value:()=>!1},{kind:"field",decorators:[a()],key:"_opened",value:()=>!1},{kind:"field",decorators:[i({type:Boolean})],key:"filterBrowserModEntities",value:()=>!0},{kind:"field",decorators:[n("ha-combo-box",!0)],key:"comboBox",value:void 0},{kind:"method",key:"open",value:function(){this.updateComplete.then((()=>{var e;null===(e=this.comboBox)||void 0===e||e.open()}))}},{kind:"method",key:"focus",value:function(){this.updateComplete.then((()=>{var e;null===(e=this.comboBox)||void 0===e||e.focus()}))}},{kind:"field",key:"_initedStates",value:()=>!1},{kind:"field",key:"_states",value:()=>[]},{kind:"field",key:"_getStates",value(){return o(((e,t,i,a,n,o,s,d)=>{let l=[];if(!t)return[];let _=Object.keys(t.states);if(!_.length)return[{entity_id:"",state:"",last_changed:"",last_updated:"",context:{id:"",user_id:null},friendly_name:this.hass.localize("ui.components.entity.entity-picker.no_entities"),attributes:{friendly_name:this.hass.localize("ui.components.entity.entity-picker.no_entities"),icon:"mdi:magnify"}}];if(i&&(_=_.filter((e=>i.includes(u(e))))),a&&(_=_.filter((e=>!a.includes(u(e))))),l=_.sort().map((e=>({...t.states[e],friendly_name:r(t.states[e])||e}))),o&&(l=l.filter((e=>e.entity_id===this.value||e.attributes.device_class&&o.includes(e.attributes.device_class)))),s&&(l=l.filter((e=>e.entity_id===this.value||e.attributes.unit_of_measurement&&s.includes(e.attributes.unit_of_measurement)))),n&&(l=l.filter((e=>e.entity_id===this.value||n(e)))),d){const e=/browser_.{8}_.{8}/;l=l.filter((t=>null===e.exec(t.entity_id)))}const c=["automation.avaiable_wallpaper_update","automation.avaiable_wallpaper_update_on_ha_start","automation.create_dashboard","automation.delete_dashboard","automation.import_a_lovelace_dashboard_to_homekit_infused","automation.populate_view_input_select_after_picking_a_dashboard","automation.run_deepstack_face_identification_time_based","automation.run_deepstack_face_identification_time_based_2","automation.run_deepstack_face_identification_time_based_3","automation.themes","automation.update_dropdown_menu_in_for_dashboards_when_a_dashboard_file_is_created","automation.update_dropdown_menu_in_for_dashboards_when_a_dashboard_file_is_deleted","automation.update_dropdown_menu_in_for_dashboards_when_a_dashboard_file_is_moved","automation.update_dropdown_menu_in_import_dashboard_when_ha_starts","automation.wallpaper_selector"];return l=l.filter((e=>!c.includes(e.entity_id))),l.length?l:[{entity_id:"",state:"",last_changed:"",last_updated:"",context:{id:"",user_id:null},friendly_name:this.hass.localize("ui.components.entity.entity-picker.no_match"),attributes:{friendly_name:this.hass.localize("ui.components.entity.entity-picker.no_match"),icon:"mdi:magnify"}}]}))}},{kind:"method",key:"shouldUpdate",value:function(e){return!!(e.has("value")||e.has("label")||e.has("disabled"))||!(!e.has("_opened")&&this._opened)}},{kind:"method",key:"willUpdate",value:function(e){(!this._initedStates||e.has("_opened")&&this._opened)&&(this._states=this._getStates(this._opened,this.hass,this.includeDomains,this.excludeDomains,this.entityFilter,this.includeDeviceClasses,this.includeUnitOfMeasurement,this.filterBrowserModEntities),this._initedStates&&(this.comboBox.filteredItems=this._states),this._initedStates=!0)}},{kind:"method",key:"render",value:function(){return s`
      <ha-combo-box
        item-value-path="entity_id"
        item-label-path="friendly_name"
        .hass=${this.hass}
        .value=${this._value}
        .label=${void 0===this.label?this.hass.localize("ui.components.entity.entity-picker.entity"):this.label}
        .allowCustomValue=${this.allowCustomEntity}
        .filteredItems=${this._states}
        .renderer=${_}
        @opened-changed=${this._openedChanged}
        @value-changed=${this._valueChanged}
        @filter-changed=${this._filterChanged}
      >
      </ha-combo-box>
    `}},{kind:"get",key:"_value",value:function(){return this.value||""}},{kind:"method",key:"_openedChanged",value:function(e){this._opened=e.detail.value}},{kind:"method",key:"_valueChanged",value:function(e){e.stopPropagation();const t=e.detail.value;t!==this._value&&this._setValue(t)}},{kind:"method",key:"_filterChanged",value:function(e){const t=e.detail.value.toLowerCase();this.comboBox.filteredItems=this._states.filter((e=>e.entity_id.toLowerCase().includes(t)||r(e).toLowerCase().includes(t))),0===this.comboBox.filteredItems.length&&this.comboBox.filteredItems.push({entity_id:"",state:"",last_changed:"",last_updated:"",context:{id:"",user_id:null},friendly_name:this.hass.localize("ui.components.entity.entity-picker.no_match"),attributes:{friendly_name:this.hass.localize("ui.components.entity.entity-picker.no_match"),icon:"mdi:magnify"}})}},{kind:"method",key:"_setValue",value:function(e){this.value=e,setTimeout((()=>{d(this,"value-changed",{value:e}),d(this,"change")}),0)}}]}}),t);
