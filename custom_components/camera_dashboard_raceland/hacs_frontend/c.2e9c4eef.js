import{_ as t,d as i,g as e,t as n,k as s,l as a,x as o,q as r}from"./main-b570e60a.js";import{Z as c,a1 as h,X as l,a2 as d}from"./c.4d0662f5.js";import"./c.84af24de.js";import"./c.17776df6.js";import"./c.5a5021e9.js";import"./c.2aff7a3c.js";import"./c.309a65b6.js";import"./c.bc207e00.js";t([r("hui-timer-entity-row")],(function(t,i){class r extends i{constructor(...i){super(...i),t(this)}}return{F:r,d:[{kind:"field",decorators:[e({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[n()],key:"_config",value:void 0},{kind:"field",decorators:[n()],key:"_timeRemaining",value:void 0},{kind:"field",key:"_interval",value:void 0},{kind:"method",key:"setConfig",value:function(t){if(!t)throw new Error("Invalid configuration");if(this._config=t,!this.hass)return;const i=this.hass.states[this._config.entity];i?this._startInterval(i):this._clearInterval()}},{kind:"method",key:"disconnectedCallback",value:function(){s(a(r.prototype),"disconnectedCallback",this).call(this),this._clearInterval()}},{kind:"method",key:"connectedCallback",value:function(){if(s(a(r.prototype),"connectedCallback",this).call(this),this._config&&this._config.entity){var t;const i=null===(t=this.hass)||void 0===t?void 0:t.states[this._config.entity];i&&this._startInterval(i)}}},{kind:"method",key:"render",value:function(){if(!this._config||!this.hass)return o``;const t=this.hass.states[this._config.entity];return t?o`
      <hui-generic-entity-row .hass=${this.hass} .config=${this._config}>
        <div class="text-content">
          ${h(this.hass,t,this._timeRemaining)}
        </div>
      </hui-generic-entity-row>
    `:o`
        <hui-warning>
          ${c(this.hass,this._config.entity)}
        </hui-warning>
      `}},{kind:"method",key:"shouldUpdate",value:function(t){return!!t.has("_timeRemaining")||l(this,t)}},{kind:"method",key:"updated",value:function(t){if(s(a(r.prototype),"updated",this).call(this,t),!this._config||!t.has("hass"))return;const i=this.hass.states[this._config.entity],e=t.get("hass");(e?e.states[this._config.entity]:void 0)!==i?this._startInterval(i):i||this._clearInterval()}},{kind:"method",key:"_clearInterval",value:function(){this._interval&&(window.clearInterval(this._interval),this._interval=void 0)}},{kind:"method",key:"_startInterval",value:function(t){this._clearInterval(),this._calculateRemaining(t),"active"===t.state&&(this._interval=window.setInterval((()=>this._calculateRemaining(t)),1e3))}},{kind:"method",key:"_calculateRemaining",value:function(t){this._timeRemaining=d(t)}}]}}),i);
